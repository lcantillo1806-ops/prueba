{"ast":null,"code":"import { inject } from '@angular/core';\nimport { map, of } from 'rxjs';\nimport { ApiHttpService } from '../../../core/services/http/api-http.service';\nimport { environment } from '../../../../environments/environment';\nimport { MOCK_PRODUCTS } from '../mock-products';\nimport { AppSettingsService } from 'src/app/core/services/http/app-settings.service';\nimport * as i0 from \"@angular/core\";\nexport let ProductService = /*#__PURE__*/(() => {\n  class ProductService {\n    constructor() {\n      this.api = inject(ApiHttpService);\n      this._appSettings = inject(AppSettingsService);\n    }\n    /**\n     *  LISTAR PRODUCTOS (Paginado)\n     */\n    getProducts(page = 0, size = 10, sortDirection = 'asc', sortBy = 'id') {\n      if (environment.useMockApi) {\n        const start = (page - 1) * size;\n        const items = MOCK_PRODUCTS.slice(start, start + size);\n        const result = {\n          items,\n          totalItems: MOCK_PRODUCTS.length,\n          page,\n          pageSize: size\n        };\n        return of(result);\n      }\n      return this.api.get(`${this._appSettings.productoMS.url.getBase}`, {\n        page,\n        size,\n        sortDirection,\n        sortBy\n      }).pipe(map(response => {\n        // Aquí transformas la respuesta del API al formato esperado\n        const result = {\n          items: response.data.content,\n          // Ajusta según la estructura real de tu API\n          totalItems: response.data.totalElements,\n          page: response.data.pageable.pageNumber,\n          pageSize: response.data.pageable.pageSize\n        };\n        return result;\n      }));\n    }\n    /**\n     *  OBTENER DETALLE POR ID\n     */\n    getProductById(productId) {\n      if (environment.useMockApi) {\n        const found = MOCK_PRODUCTS.find(p => p.id === productId);\n        if (!found) throw new Error(`Producto con ID ${productId} no existe (mock)`);\n        return of(found);\n      }\n      return this.api.get(`/products/${productId}`);\n    }\n    /**\n     *  Crear nuevo producto (Usado en ADMIN)\n     */\n    createProduct(product) {\n      if (environment.useMockApi) {\n        // Simular creación\n        const newId = (MOCK_PRODUCTS.length + 1).toString();\n        const newProduct = {\n          id: newId,\n          ...product\n        };\n        MOCK_PRODUCTS.push(newProduct);\n        return of(newProduct);\n      }\n      return this.api.post(`${this._appSettings.productoMS.url.getBase}`, product);\n    }\n    /**\n     *  Actualizar producto (ADMIN)\n     */\n    updateProduct(productId, data) {\n      if (environment.useMockApi) {\n        const index = MOCK_PRODUCTS.findIndex(p => p.id === productId);\n        if (index === -1) throw new Error(`Producto ${productId} no encontrado (mock)`);\n        MOCK_PRODUCTS[index] = {\n          ...MOCK_PRODUCTS[index],\n          ...data\n        };\n        return of(MOCK_PRODUCTS[index]);\n      }\n      return this.api.patch(`${this._appSettings.productoMS.url.getBase2}${productId}`, data);\n    }\n    /**\n     *  Eliminar producto (ADMIN)\n     */\n    deleteProduct(id) {\n      if (environment.useMockApi) {\n        const index = MOCK_PRODUCTS.findIndex(p => p.id === id);\n        if (index >= 0) MOCK_PRODUCTS.splice(index, 1);\n        return of(void 0);\n      }\n      return this.api.delete(`${this._appSettings.productoMS.url.getBase2}`, {\n        id\n      });\n    }\n    static {\n      this.ɵfac = function ProductService_Factory(t) {\n        return new (t || ProductService)();\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: ProductService,\n        factory: ProductService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ProductService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}